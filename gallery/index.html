<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>海报画廊</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body onselectstart="return false">
<!--改写视图，为模板字符串-->
<div class="wrap" id="wrap">
        <!--photo-wrap负责平移和旋转-->
    <div class="photo photo_center photo_front" onclick="turn(this)" id="photo_{{index}}">
        <!--photo-wrap负责翻转-->
        <div class="photo-wrap">
            <div class="side side-front">
                <p class="image"><img src="photo/{{img}}"></p>
                <p class="caption">{{caption}}</p>
            </div>
            <div class="side side-back">
                <p class="desc">{{desc}}</p>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" >
    function turn(elem) {
        var cls = elem.className;
        if(/photo_front/.test(cls)){
            cls = cls.replace(/photo_front/,'photo_back');
        }else{
            cls = cls.replace(/photo_back/,'photo_front');
        }
        return elem.className = cls;

    }
    //3.通用函数
    function g(selector) {
        var method = selector.substr(0,1) == '.'?'getElementByClassName':'getElementById';
        return document[method](selector.substr(1));
    }
    //4.输出所有的海报
    var data = data;
    function addPhotos() {
        var template = g('#wrap').innerHTML;
        var html=[];
        for(s in data){
            var _html = template
                          .replace('{{index}}',s)
                          .replace('{{img}}',data[s].img)
                          .replace('{{caption}}',data[s].caption)
                          .replace('{{desc}}',data[s].desc);
            html.push(_html);
        }
        g('#wrap').innerHTML = html.join('');
        rsort(random([0,data.length]));
    }
    addPhotos();
//    5.排序海报
    function rsort(n) {
        var photo_center = g('#photo_'+n);
        photo_center.className += 'photo_center';
    }
//    6随机生成一个值 支持取值范围。
    function random(range) {
        var max = Math.max(range[0],range[1]);
        var min = Math.min(range[0],range[1]);
        diff = max - min;
        var number = Math.ceil(Math.random()*diff +min);
        return number;

    }
</script>
<script type="text/javascript" src="data.js"></script>

</body>
</html>







